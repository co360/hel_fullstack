(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(15),c=t.n(o),l=(t(22),t(16)),u=t(2),i=t(4),m=t.n(i),s="/api/persons",d=function(){return m.a.get(s)},f=function(e){return m.a.post(s,e)},h=function(e){return m.a.delete("".concat(s,"/").concat(e))},b=function(e,n){return m.a.put("".concat(s,"/").concat(e),n)},v=function(e){var n=e.person,t=e.deletePerson;e.id;return r.a.createElement("p",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:t},"delete"))},E=function(e){var n=e.handleFilter,t=e.searchPerson;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",null,"Search for person:",r.a.createElement("input",{placeholder:"Search",value:t,onChange:n}))))},p=function(e){var n=e.searchResults,t=e.deletePerson;return r.a.createElement("div",null,n.map((function(e,n){return r.a.createElement(v,{key:n,person:e,deletePerson:function(){return t(e.id)}})})))},g=function(e){var n=e.submitForm,t=e.newName,a=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:a}),r.a.createElement("br",null),"Number: ",r.a.createElement("input",{value:o,onChange:c}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Add")),r.a.createElement("div",null)))},w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),m=i[0],s=i[1],v=Object(a.useState)(""),w=Object(u.a)(v,2),j=w[0],O=w[1],N=Object(a.useState)(""),k=Object(u.a)(N,2),S=k[0],C=k[1],P=Object(a.useState)([]),y=Object(u.a)(P,2),F=y[0],T=y[1],W=Object(a.useState)(null),A=Object(u.a)(W,2),B=A[0],D=A[1];Object(a.useEffect)((function(){d().then((function(e){console.log("useEffect",e),o(e.data)}))}),[]);var J=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)};r.a.useEffect((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(S)}));T(e)}),[t,S]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(J,{message:B}),r.a.createElement(E,{handleFilter:function e(n){console.log(e),C(n.target.value)},searchPerson:S}),r.a.createElement("h3",null,"Add new person"),r.a.createElement(g,{handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){O(e.target.value)},newName:m,newNumber:j,submitForm:function(e){e.preventDefault(),d().then((function(e){var n=Object(l.a)(e.data);if(console.log("here is person data",n),n.some((function(e){return e.name===m}))){if(window.confirm("".concat(m," is already added to phonebook. Want to replace old number with new one?"))){var a=n.find((function(e){return e.name===m})).id;b(a,{name:m,number:j}).then((function(){s(""),O(""),d().then((function(e){o(t)})),D("".concat(m,"\xb4s number was changed.")),setTimeout((function(){D(null)}),3e3)}))}}else{var r={name:m,number:j};f(r).then((function(e){s(""),O(""),o(n.concat(r))})),D("".concat(r.name," was added to phonebook.")),setTimeout((function(){D(null)}),3e3)}}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{persons:t,searchResults:F,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));alert("Deleting ".concat(n.name),window.location.href=""),h(e).then((function(e){o(t.filter((function(n){return n.id!==e})))})),D("".concat(n.name," was deleted")),setTimeout((function(){D(null)}),3e3)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.9d9fda4c.chunk.js.map