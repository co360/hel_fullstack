(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=(t(22),t(16)),l=t(2),i=t(4),m=t.n(i),s="/api/persons",f=function(){return m.a.get(s)},d=function(e){return m.a.post(s,e)},h=function(e){return m.a.delete("".concat(s,"/").concat(e))},b=function(e,n){return m.a.put("".concat(s,"/").concat(e),n)},p=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("p",null,n.name," ",n.number," ",r.a.createElement("button",{type:"submit",onClick:t},"delete"))},E=function(e){var n=e.handleFilter,t=e.searchPerson;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",null,"Search for person:",r.a.createElement("input",{placeholder:"Search",value:t,onChange:n}))))},v=function(e){var n=e.searchResults,t=e.deletePerson;return r.a.createElement("div",null,n.map((function(e,n){return r.a.createElement(p,{key:n,person:e,deletePerson:function(){return t(e.id)}})})))},g=function(e){var n=e.submitForm,t=e.newName,a=e.handleNameChange,c=e.newNumber,o=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name:"," ",r.a.createElement("input",{value:t,onChange:a}),r.a.createElement("br",null),"Number:"," ",r.a.createElement("input",{value:c,onChange:o}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Add")),r.a.createElement("div",null)))},w=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),m=i[0],s=i[1],p=Object(a.useState)(""),w=Object(l.a)(p,2),j=w[0],O=w[1],N=Object(a.useState)(""),S=Object(l.a)(N,2),k=S[0],C=S[1],P=Object(a.useState)([]),y=Object(l.a)(P,2),F=y[0],T=y[1],A=Object(a.useState)(null),D=Object(l.a)(A,2),J=D[0],R=D[1];Object(a.useEffect)((function(){f().then((function(e){console.log("useEffect",e),c(e.data)}))}),[]);var x=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)};r.a.useEffect((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(k)}));T(e)}),[t,k]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(x,{message:J}),r.a.createElement(E,{handleFilter:function e(n){console.log(e),C(n.target.value)},searchPerson:k}),r.a.createElement("h3",null,"Add new person"),r.a.createElement(g,{handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){O(e.target.value)},newName:m,newNumber:j,submitForm:function(e){e.preventDefault(),f().then((function(e){var n=Object(u.a)(e.data);if(console.log("here is person data",n),n.some((function(e){return e.name===m}))){if(window.confirm("".concat(m," is already added to phonebook. Want to replace old number with new one?"))){var a=n.find((function(e){return e.name===m})).id;b(a,{name:m,number:j}).then((function(){s(""),O(""),f().then((function(){c(t)})),R("".concat(m,"\xb4s number was changed.")),setTimeout((function(){R(null)}),3e3)}))}}else{var r={name:m,number:j};d(r).then((function(){s(""),O(""),c(n.concat(r))})).catch((function(e){console.log(e.response.data),R("".concat(e.response.data.error))})),R("".concat(r.name," was added to phonebook.")),setTimeout((function(){R(null)}),3e3)}}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:t,searchResults:F,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));alert("Deleting ".concat(n.name),window.location.href=""),h(e).then((function(e){c(t.filter((function(n){return n.id!==e})))})),R("".concat(n.name," was deleted")),setTimeout((function(){R(null)}),3e3)}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e2de9452.chunk.js.map